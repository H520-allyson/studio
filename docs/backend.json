{
  "entities": {
    "Order": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Order",
      "type": "object",
      "description": "Represents a customer order for printing services.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the order."
        },
        "clientName": {
          "type": "string",
          "description": "The full name of the client who placed the order."
        },
        "clientEmail": {
          "type": "string",
          "description": "The email address of the client.",
          "format": "email"
        },
        "notes": {
          "type": "string",
          "description": "Detailed printing requirements and instructions from the client."
        },
        "fileUrl": {
          "type": "string",
          "description": "URL of the uploaded print file in Firebase Storage.",
          "format": "uri"
        },
        "orderStatus": {
          "type": "string",
          "description": "The current status of the order (e.g., Received, In Review, Printing, Ready for Pickup!)."
        },
        "orderDate": {
          "type": "string",
          "description": "The date and time when the order was placed.",
          "format": "date-time"
        },
        "orderReferenceNumber": {
          "type": "string",
          "description": "A unique reference number for the order."
        }
      },
      "required": [
        "id",
        "clientName",
        "clientEmail",
        "notes",
        "fileUrl",
        "orderStatus",
        "orderDate",
        "orderReferenceNumber"
      ]
    },
    "ShopConfiguration": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ShopConfiguration",
      "type": "object",
      "description": "Represents customizable settings for the printing shop.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the shop configuration."
        },
        "shopName": {
          "type": "string",
          "description": "The name of the printing shop."
        },
        "logoUrl": {
          "type": "string",
          "description": "URL of the shop's logo image.",
          "format": "uri"
        },
        "currency": {
          "type": "string",
          "description": "The currency used by the shop (e.g., PHP for Philippine Peso)."
        },
        "businessHours": {
          "type": "string",
          "description": "Shop business hours in a textual format (e.g., 'Mon-Fri: 9am-6pm, Sat: 10am-2pm')."
        },
        "aboutUsText": {
          "type": "string",
          "description": "The 'About Us' text displayed on the landing page."
        },
        "contactInformation": {
          "type": "string",
          "description": "The shop's contact information (e.g., address, phone number)."
        },
        "defaultPricingFormula": {
          "type": "string",
          "description": "Default formula used for price calculation in cost calculator."
        }
      },
      "required": [
        "id",
        "shopName",
        "currency",
        "businessHours",
        "aboutUsText",
        "contactInformation"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/shop_configuration/{shopConfigurationId}",
        "definition": {
          "entityName": "ShopConfiguration",
          "schema": {
            "$ref": "#/backend/entities/ShopConfiguration"
          },
          "description": "Stores customizable shop settings. Read-only for the public, editable by admins.",
          "params": [
            {
              "name": "shopConfigurationId",
              "description": "Unique identifier for the shop configuration document."
            }
          ]
        }
      },
      {
        "path": "/orders/{orderReferenceNumber}",
        "definition": {
          "entityName": "Order",
          "schema": {
            "$ref": "#/backend/entities/Order"
          },
          "description": "Stores order details. Publicly readable via unique ID for tracking, editable only by admins.",
          "params": [
            {
              "name": "orderReferenceNumber",
              "description": "Unique order reference number, serves as the document ID."
            }
          ]
        }
      },
      {
        "path": "/roles_admin/{userId}",
        "definition": {
          "entityName": "role_admin",
          "schema": {
            "$ref": "#/backend/entities/Order"
          },
          "description": "Collection to store admin roles. Existence of a document with the user's UID grants admin privileges.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase UID of the user with admin privileges."
            }
          ]
        }
      }
    ],
    "reasoning": "The updated structure allows for a mixed-access model. Shop configuration and order tracking are now publicly readable to ensure the application's core functionality (branding, pricing, and status checks) works for all visitors. Order placement is also public. Administrative controls remain strictly protected via the roles_admin check."
  }
}